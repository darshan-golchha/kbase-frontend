{"ast":null,"code":"var _jsxFileName = \"D:\\\\OneDrive\\\\OneDrive - nucleusonline\\\\Documents\\\\Kbase\\\\kbase-frontend\\\\src\\\\components\\\\Login.js\",\n  _s = $RefreshSig$();\nimport { useNavigate, useLocation } from \"react-router\";\nimport { useState, useContext } from \"react\";\nimport useAuth from \"./hooks/useAuth\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  var _location$state, _location$state$from;\n  const navigate = useNavigate();\n  const location = useLocation();\n  const from = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : (_location$state$from = _location$state.from) === null || _location$state$from === void 0 ? void 0 : _location$state$from.pathname) || \"/linkpage\";\n  const {\n    auth,\n    setAuth\n  } = useAuth();\n  const [name, setName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const API = axios.create({\n    baseURL: \"http://localhost:8080\"\n  });\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const res = await API.post(\"/auth/login\", {\n        name,\n        password\n      }).then(res => {\n        if (res !== null && res !== void 0 && res.data.name) {\n          const role = res === null || res === void 0 ? void 0 : res.data.role;\n          setAuth({\n            role: `${role}`,\n            name: `${name}`\n          });\n          setName(\"\");\n          setPassword(\"\");\n          navigate(from, {\n            replace: true\n          });\n        } else {\n          console.log(\"incorrect submission\");\n          setError(res.message);\n        }\n      });\n    } catch (err) {\n      if (!(err !== null && err !== void 0 && err.response)) {\n        setError(\"no server response\");\n      } else {\n        setError(\"registeration failed\");\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"/dgRtHRM0K2dh/nVQxIHuDlBRcg=\", false, function () {\n  return [useNavigate, useLocation, useAuth];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useNavigate","useLocation","useState","useContext","useAuth","axios","jsxDEV","_jsxDEV","Login","_s","_location$state","_location$state$from","navigate","location","from","state","pathname","auth","setAuth","name","setName","password","setPassword","error","setError","API","create","baseURL","handleSubmit","e","preventDefault","res","post","then","data","role","replace","console","log","message","err","response","className","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/OneDrive/OneDrive - nucleusonline/Documents/Kbase/kbase-frontend/src/components/Login.js"],"sourcesContent":["import { useNavigate, useLocation } from \"react-router\";\r\nimport { useState, useContext } from \"react\";\r\nimport useAuth from \"./hooks/useAuth\";\r\nimport axios from \"axios\";\r\n\r\nconst Login = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const from = location.state?.from?.pathname || \"/linkpage\";\r\n  const { auth, setAuth } = useAuth();\r\n  const [name, setName] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const API = axios.create({\r\n    baseURL: \"http://localhost:8080\",\r\n  });\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const res = await API.post(\"/auth/login\", {\r\n        name,\r\n        password,\r\n      }).then((res) => {\r\n        if (res?.data.name) {\r\n          const role = res?.data.role;\r\n          setAuth({ role: `${role}`, name: `${name}` });\r\n          setName(\"\");\r\n          setPassword(\"\");\r\n          navigate(from, { replace: true });\r\n        } else {\r\n          console.log(\"incorrect submission\");\r\n          setError(res.message);\r\n        }\r\n      });\r\n    } catch (err) {\r\n      if (!err?.response) {\r\n        setError(\"no server response\");\r\n      } else {\r\n        setError(\"registeration failed\");\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='App'>\r\n      <form onSubmit={handleSubmit}>{/*code for signin form*/}</form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}